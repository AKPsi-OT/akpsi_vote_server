<!DOCTYPE HTML>
<html>
<head>
    <title>Admin Control Panel</title>
    <link rel="stylesheet" href="/static/style.css">
    <script type="text/javascript" src="//code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="/static/spin.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
    <script type="text/javascript" charset="utf-8">
        var username = '{{ username }}';

        namespace = '/vote'; // change to an empty string
        var socket = io.connect(namespace);
        socket.on('connect', function() {
        });

        $(document).ready(function(){
            socket.on('vote_submitted', function(msg){
                $('#c2').append("Votes Cast: <b>" + msg.votes_cast + "</b>");
                $('#c2').append("Votes Left: <b>" + msg.votes_left + "</b>");
            });

            $('form#start').submit(function(event) {
                var msg = {}
                msg.name = $('#name').val();
                msg.abstain = $("input[name='abstain']:checked").val();

                socket.emit('start_vote', msg);
                $('#c2').append("============= VOTING ON " + msg.name + "STARTED =============");
                return false;
            })

            // Catch window closing event and send a socket disconnect event
            window.onbeforeunload = function(){
                socket.emit('disconnect_req');
            }
        });
    </script>
</head>
<body>
    <div id="wrapper">
        <div id="c1">
            <form id="start" method="post">
                <input type="text" name="name" id="name" placeholder="Rush Name"> <br />
                <label><input type="radio" name="abstain" value="true">Abstain</label>
                <label><input type="radio" name="abstain" value="false">No Abstain</label> <br />
                <input type="submit" value="Start Vote">
            </form>
        </div>

        <div id="c2">

        </div>

        <div id="c3">

        </div>
    </div>
</body>
</html>
